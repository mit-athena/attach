.\" $Id: detach.1,v 1.3 1991-07-01 09:44:29 probe Exp $
.\"
.TH DETACH 1 "1 July 1991"
.ds ]W MIT Project Athena
.SH NAME
detach \- detach a remote file system from your workstation
.SH SYNOPSIS
.nf
detach [ options ] filesystem or mountpoint ...
detach -a [ options ]
.SH DESCRIPTION

\fIDetach\fP performs the appropriate device-dependent operations to
disassociate a filesystem which was attached using \fIattach\fP(1)
from the workstation.  

The second form is used to detach all attached filesystems from the
workstation.  This is typically run when the workstation
deactivates, so as to flush all user mounted filesystems from the
workstation. 

The following options are available in \fIdetach\fP:

.IP "-verbose or -v"
Display verbose information about the success of the detach.  This is
the default.
.IP "-quiet or -q"
Don't display verbose information.
.IP "-all or -a"
Attempt to detach all filesystems which had been attached using the
\fIattach\fP command.
.IP "-debug or -d"
Print debugging information.  This will not normally be useful to users.
.IP "-unmap or -y"
Attempt to remove authentication for the user from the filesystem
server.  The authentication will be removed even if the detach fails.
This is the default.
.IP "-nomap or -n"
Do not attempt to remove authentication for the user from the
filesystem server.
.IP "-zephyr or -z"
Remove \fIZephyr\fP subscription information about the server host.
.IP "-nozephyr or -h"
Don't remove \fIZephyr\fP subscription information about the server host.
.IP "-type \fIfilesystem-type\fP or -t \fIfilesystem-type\fP"
Used with the -all option to detach all filesystems of a particular
type.  If not specified, the -all option will detach all filesystems.
.IP "-explicit or -e"
Change the behavior of \fIdetach\fP such that the \fIfilesystem\fP is
now interpreted as \fIhost:directory\fP (in the case of NFS) or
\fIhost:pack\fP (in the case of RVD) instead of as a Hesiod name.
Type -type option can be used to specify the filesystem type.
.IP "-noexplicit or -x"
Tell \fIdetach\fP to interpret the \fIfilesystem\fP as a Hesiod name.
This is the default.
.IP "-force or -f"
Ordinarily, \fIdetach\fP will not attempt to detach a filesystem which
it believes it thinks is being attached or detached by another
process.  This flag overrides this behavior and \fIforces\fP the
filesystem to be detached.  This option can be dangerous if used
indiscriminately.
.IP "-override or -O"
This option allows the trusted users to force a filesystem to be
detached, even if it was attached by another user or locked.
.IP "-host \fIhost\fP or -H \fIhost\fP"
Requests detach to detach all remote filesystems whose fileserver
matches the specified host.
.IP "-user \fIusername\fP or -U \fIusername\fP"
Trusted users may specify that the \fIdetach\fP command be run on behalf
of the specified user.
.IP "-clean or -C"
This option indicates that the specified filesystems should be detached
if they are not wanted by anyone who is in \fI/etc/passwd\fP.
.IP "-lint or -L"
This option indicates that \fIdetach\fP should clean up any malformed
entries in the \fIattachtab\fP file.

.PP
The first thing \fIdetach\fP does is to attempt to read in
/etc/attach.conf, which can be used by the system administrator to
customize the behavior of \fIattach\fP and \fIdetach\fP.  See 
\fIattach.conf(5)\fP for more information.

.SH DIAGNOSTICS

If \fIdetach\fP is executed with only a single
filesystem argument, the exit status will be one of the following:
.TP 5
0
No error encountered.
.TP 5
1
Bad arguments.
.TP 5
3
Internal fatal error.
.TP 5
10
Keberos failure.
.TP 5
11
Host communication failure.
.TP 5
12
Authentication failure.
.TP 5
13
No reserved ports available.
.PP
.TP 5
20
Filesystem not attached.
.TP 5
21
Filesystem already in use by another \fIdetach\fP process.
.PP
If more than one filesystem argument is specified (or \fIdetach\fP is 
executed with the -a option), the exit status can be either 0, 1, or 3
as listed above, or: 
.TP 5
2
Something went wrong with one of the filesystems.
.PP
If an error is encountered while manipulating one filesystem in the
list, \fIdetach\fP continues with the other filesystems and returns
the exit status 2 after attempting to detach all the other filesystems.

.SH NOTE
The programs \fIattach(1)\fP, \fIdetach(1)\fP, \fInfsid(1)\fP, and
\fIzinit(8)\fP are all really the same program.  Typically
\fIdetach(1)\fP, \fInfsid(1)\fP and \fIzinit(8)\fP are links to
\fIattach\fP.  Argv[0] is used to determine which one of the four
programs are run.  This may be overridden by specifying -P
\fIprogname\fP, where \fIprogname\fP should be one of the above four
program names.

.SH FILES
/usr/tmp/attachtab
.br
/tmp/attach.\fIfilesystem\fP

.SH "SEE ALSO"

attach(1), nfsid(1), zinit(8), zephyr(1), hesiod(3)
.br
`Hesiod - Project Athena Technical Plan -- Name Service'
.br
`Hesiod Applications Programmers' Guide'
.br
`Hesiod Operations and Maintenance Guide'

.SH AUTHOR
Robert French, Project Athena
.br
Copyright 1988, Massachusetts Institute of Technology

.SH BUGS
